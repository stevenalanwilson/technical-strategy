<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Strategy Ontology Diagram</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .node rect {
    stroke: #333;
    stroke-width: 1.5px;
    rx: 8;
    ry: 8;
  }
  .node text {
    fill: #000;
    font-size: 12px;
    text-anchor: middle;
    alignment-baseline: middle;
  }
  .link {
    fill: none;
    stroke: #777;
    stroke-width: 1.5px;
    marker-end: url(#arrow);
  }
</style>
</head>
<body>
<svg width="1100" height="650"></svg>

<script>
// Ontology Nodes (with time horizon classification)
const nodes = [
  { id: "Purpose", group: "Enduring" },
  { id: "Vision", group: "Enduring" },
  { id: "Core Values", group: "Enduring" },
  { id: "Targets", group: "3-5 years" },
  { id: "Annual Goals", group: "1 year" },
  { id: "Key Initiatives", group: "Quarter" },
  { id: "KPIs", group: "Quarter" },
  { id: "Meeting Rhythms", group: "Quarter" }
];

// Links based on logical hierarchy in the attached model
const links = [
  { source: "Purpose", target: "Vision" },
  { source: "Vision", target: "Core Values" },
  { source: "Core Values", target: "Targets" },
  { source: "Targets", target: "Annual Goals" },
  { source: "Annual Goals", target: "Key Initiatives" },
  { source: "Key Initiatives", target: "KPIs" },
  { source: "KPIs", target: "Meeting Rhythms" }
];

// Color mapping based on time horizon
const colorScale = {
  "Enduring": "#ffd966",
  "3-5 years": "#9fc5e8",
  "1 year": "#b6d7a8",
  "Quarter": "#f6b26b"
};

const svg = d3.select("svg");
const width = +svg.attr("width");
const height = +svg.attr("height");

// Arrow marker defs
svg.append("defs").append("marker")
  .attr("id", "arrow")
  .attr("viewBox", "0 0 10 10")
  .attr("refX", 18)
  .attr("refY", 5)
  .attr("markerWidth", 6)
  .attr("markerHeight", 6)
  .attr("orient", "auto")
  .append("path")
  .attr("d", "M 0 0 L 10 5 L 0 10 z")
  .attr("fill", "#777");

// Force simulation
const simulation = d3.forceSimulation(nodes)
  .force("link", d3.forceLink(links).id(d => d.id).distance(150))
  .force("charge", d3.forceManyBody().strength(-500))
  .force("center", d3.forceCenter(width/2, height/2))
  .force("collide", d3.forceCollide(80));

// Draw links
const link = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(links)
  .enter().append("line")
  .attr("class", "link");

// Draw nodes
const node = svg.append("g")
  .attr("class", "nodes")
  .selectAll("g")
  .data(nodes)
  .enter().append("g")
  .attr("class", "node");

node.append("rect")
  .attr("width", 140)
  .attr("height", 40)
  .attr("x", -70)
  .attr("y", -20)
  .attr("fill", d => colorScale[d.group])
  .attr("stroke", "#333");

node.append("text")
  .text(d => d.id);

simulation.on("tick", () => {
  link
    .attr("x1", d => d.source.x)
    .attr("y1", d => d.source.y)
    .attr("x2", d => d.target.x)
    .attr("y2", d => d.target.y);

  node.attr("transform", d => `translate(${d.x},${d.y})`);
});

</script>
</body>
</html>
